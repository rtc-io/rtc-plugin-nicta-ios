!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),(n.RTC||(n.RTC={})).IOS=e()}}(function(){return function e(n,t,o){function i(a,c){if(!t[a]){if(!n[a]){var d="function"==typeof require&&require;if(!c&&d)return d(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=t[a]={exports:{}};n[a][0].call(f.exports,function(e){var t=n[a][1][e];return i(t?t:e)},f,f.exports,e,n,t,o)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,n,t){"use strict";var o=e("objectfit"),i=/\(iOS\;.*Mobile\/NICTA/,r=!1,a=!1;t.supported=function(){return"undefined"!=typeof navigator&&i.test(navigator.userAgent)};t.init=function(e,n){function t(){var e;return a?n():(document.removeEventListener("deviceready",t),e=window.console.log,window.console.log=function(){var n=[].slice.call(arguments).join(" ");try{NativeLog(n)}catch(e){alert(n)}e.apply(window.console,arguments)},"function"==typeof getUserMedia&&(navigator.getUserMedia=function(e,n,t){getUserMedia(e,n,t)}),a=!0,console.log("iOS plugin initialized, getUserMedia available = "+!!navigator.getUserMedia),void n())}return(r=r||"undefined"!=typeof getPeerConnection)?setTimeout(t,10):void document.addEventListener("deviceready",t)};t.attach=function(e,n){function t(){var e=d.getBoundingClientRect(),n=window.getComputedStyle(d),t=o[n.objectFit]||o.contain;d.width=e.width,d.height=e.height,r=t([0,0,e.width,e.height]),i()}function i(){a&&u.drawImage.apply(u,[a].concat(r([0,0,a.width,a.height])))}var r,a,d=c(n,(n||{}).el),u=d.getContext("2d");return e&&e.__orig&&(e=e.__orig),window.addEventListener("resize",t,!1),window.addEventListener("load",t,!1),iOSRTC_onDrawRegi(e,function(e){a=new Image,a.onload=i,a.src=e}),setTimeout(t,10),d},t.attachStream=function(e,n){var t=[],o=0,i=0;t=n.map(function(e){return e.el.getContext("2d")}),e&&e.__orig&&(e=e.__orig),iOSRTC_onDrawRegi(e,function(e,n,r){var a=!1;try{var c=new Image;a=n!==o||r!==i,c.onload=function(){t.forEach(function(e){a&&(e.canvas.width=n,e.canvas.height=r),e.drawImage(c,0,0,n,r)})},c.src=e}catch(e){console.log("encountered error while drawing video"),console.log("error: "+e.message)}o=n,i=r})};var c=t.prepareElement=function(e,n){var t,o,i=n instanceof HTMLVideoElement||n instanceof HTMLAudioElement,r=document.createElement("canvas"),a=i?n.parentNode:n;return console.log("preparing element, created canvas"),i?(console.log("getting computed style for the element"),t=window.getComputedStyle(n),console.log("getting client bounding rect"),o=n.getBoundingClientRect(),console.log("setting w and h"),r.width=o.width,r.height=o.height,r.className=n.className,console.log("inserting canvas"),a.insertBefore(r,n),a.removeChild(n)):a&&a.appendChild(r),r};t.createIceCandidate=function(e){return console.log("creating ice candidate, keys: "+Object.keys(e).join(" ")),getRTCIceCandidate({sdpMLineIndex:(e||{}).sdpMLineIndex,candidate:(e||{}).candidate})},t.createConnection=function(e,n){return getPeerConnection(e,n)},t.createSessionDescription=function(e){return getRTCSessionDescription(e)},"undefined"!=typeof document&&document.addEventListener("deviceready",function(){r=!0})},{objectfit:4}],2:[function(e,n){n.exports=function(e,n){function t(n){var t=n[2],a=n[3],c=t/a,d=[];return r>c?(d[2]=i*c|0,d[3]=i,d[0]=o-d[2]>>1,d[1]=0):(d[2]=o,d[3]=o/c|0,d[0]=0,d[1]=i-d[3]>>1),d[0]+=e[0],d[1]+=e[1],d}var o=e[2],i=e[3],r=o/i;return n?t(n):t}},{}],3:[function(e,n){n.exports=function(e,n){function t(n){var t=n[2],a=n[3],c=t/a,d=[];return r>c?(d[2]=o,d[3]=o/c|0,d[0]=1,d[1]=-(d[3]-i)>>1):(d[2]=i*c|0,d[3]=i,d[0]=-(d[2]-o)>>1,d[1]=0),d[0]+=e[0],d[1]+=e[1],d}var o=e[2],i=e[3],r=o/i;return n?t(n):t}},{}],4:[function(e,n,t){t.contain=e("./contain"),t.cover=e("./cover")},{"./contain":2,"./cover":3}]},{},[1])(1)});
//# sourceMappingURL=rtc.min.js.map